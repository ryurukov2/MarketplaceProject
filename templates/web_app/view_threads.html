{% extends 'base/base.html' %}
{% load static %}
{% block content %}

    {% for thread in threads %}
        {% if user.id == thread.user_1.user_id %}
        <h3>Conversation with {{ thread.user_2.first_name }} {{ thread.user_2.last_name }}</h3>
        <ul>
            <li>
                <p>
                    <a href="{% url 'view_messages' pk=thread.user_2_id %}">{{ thread.messages.last.sender.first_name }} {{ thread.messages.last.sender.last_name }}</a>: {{ thread.messages.last.message_body }}
                </p>
                <p>Sent: {{ thread.messages.last.timestamp }}</p>
            </li>
        </ul>
        {% else %}
        <h3>Conversation with {{ thread.user_1.first_name }} {{ thread.user_1.last_name }} </h3>
        <ul>
            <li>
                <p>
                    <a href="{% url 'view_messages' pk=thread.user_1_id %}">{{ thread.messages.last.sender.first_name }} {{ thread.messages.last.sender.last_name }}</a>: {{ thread.messages.last.message_body }}
                </p>
                <p>Sent: {{ thread.messages.last.timestamp }}</p>
            </li>
        </ul>
        {% endif %}
    {% endfor %}


{% endblock %}